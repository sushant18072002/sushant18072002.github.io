<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personalized Travel - TravelAI</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-900: #0F172A; --primary-800: #1E293B; --primary-700: #334155; --primary-600: #475569; --primary-400: #94A3B8; --primary-100: #F1F5F9;
            --ocean-blue: #1E40AF; --mirage-blue: #4b90e6; --governor-bay: #2553eb; --emerald: #10B981; --premium-amber: #F59E0B;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; line-height: 1.5; background: var(--primary-50); }

        /* Personalized Header */
        .personalized-header {
            background: linear-gradient(135deg, var(--governor-bay), var(--mirage-blue));
            color: white; padding: 2rem; text-align: center;
        }
        .welcome-message {
            font-size: 1.5rem; font-weight: 600; margin-bottom: 0.5rem;
        }
        .user-stats {
            display: flex; justify-content: center; gap: 2rem; margin-top: 1rem; flex-wrap: wrap;
        }
        .stat-item {
            background: rgba(255, 255, 255, 0.1); padding: 0.75rem 1.5rem; border-radius: 0.5rem;
        }
        .stat-number { font-size: 1.2rem; font-weight: 700; }
        .stat-label { font-size: 0.9rem; opacity: 0.9; }

        /* Personalized Recommendations */
        .recommendations-section {
            padding: 3rem 1.5rem; max-width: 1200px; margin: 0 auto;
        }
        .section-title {
            font-size: 2rem; font-weight: 700; color: var(--primary-900); margin-bottom: 2rem; text-align: center;
        }
        .recommendations-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;
        }
        .recommendation-card {
            background: white; border-radius: 1rem; overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); transition: all 0.3s ease;
            position: relative;
        }
        .recommendation-card:hover { transform: translateY(-4px); box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15); }
        .recommendation-badge {
            position: absolute; top: 1rem; left: 1rem; background: var(--governor-bay);
            color: white; padding: 0.25rem 0.75rem; border-radius: 50px; font-size: 0.8rem; font-weight: 600;
        }
        .recommendation-image {
            height: 200px; background: linear-gradient(45deg, var(--primary-100), var(--primary-200));
            display: flex; align-items: center; justify-content: center; font-size: 3rem;
        }
        .recommendation-content { padding: 1.5rem; }
        .recommendation-title {
            font-size: 1.2rem; font-weight: 600; color: var(--primary-900); margin-bottom: 0.5rem;
        }
        .recommendation-reason {
            color: var(--governor-bay); font-size: 0.9rem; margin-bottom: 1rem; font-weight: 500;
        }
        .recommendation-price {
            font-size: 1.5rem; font-weight: 700; color: var(--governor-bay); margin-bottom: 1rem;
        }
        .recommendation-features {
            display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap;
        }
        .feature-tag {
            background: var(--primary-100); color: var(--primary-700); padding: 0.25rem 0.75rem;
            border-radius: 50px; font-size: 0.8rem;
        }

        /* Preference Learning */
        .preference-learning {
            background: var(--primary-50); padding: 2rem; border-radius: 1rem; margin: 2rem 0;
        }
        .learning-title {
            font-size: 1.3rem; font-weight: 600; color: var(--primary-900); margin-bottom: 1rem;
        }
        .preference-options {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;
        }
        .preference-option {
            background: white; padding: 1rem; border-radius: 0.75rem; cursor: pointer;
            transition: all 0.3s ease; text-align: center; border: 2px solid transparent;
        }
        .preference-option:hover { border-color: var(--governor-bay); }
        .preference-option.selected { border-color: var(--governor-bay); background: rgba(37, 83, 235, 0.05); }
        .preference-icon { font-size: 2rem; margin-bottom: 0.5rem; }
        .preference-label { font-weight: 500; color: var(--primary-900); }

        /* Dynamic Pricing */
        .dynamic-pricing {
            background: linear-gradient(135deg, var(--premium-amber), #F59E0B);
            color: white; padding: 1.5rem; border-radius: 1rem; margin: 1rem 0;
        }
        .pricing-header {
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;
        }
        .pricing-title { font-size: 1.2rem; font-weight: 600; }
        .pricing-timer { font-size: 0.9rem; opacity: 0.9; }
        .pricing-details {
            display: flex; justify-content: space-between; align-items: center;
        }
        .original-price {
            text-decoration: line-through; opacity: 0.8; margin-right: 0.5rem;
        }
        .discounted-price { font-size: 1.5rem; font-weight: 700; }
        .savings-amount { background: rgba(255, 255, 255, 0.2); padding: 0.25rem 0.75rem; border-radius: 0.25rem; }

        /* Behavioral Triggers */
        .behavioral-trigger {
            position: fixed; bottom: 2rem; right: 2rem; z-index: 1000;
            background: white; border-radius: 1rem; padding: 1.5rem; max-width: 300px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); transform: translateX(120%);
            transition: transform 0.5s ease;
        }
        .behavioral-trigger.show { transform: translateX(0); }
        .trigger-title { font-weight: 600; color: var(--primary-900); margin-bottom: 0.5rem; }
        .trigger-message { color: var(--primary-600); font-size: 0.9rem; margin-bottom: 1rem; }
        .trigger-cta {
            background: var(--governor-bay); color: white; border: none; padding: 0.75rem 1.5rem;
            border-radius: 0.5rem; font-weight: 600; cursor: pointer; width: 100%;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .user-stats { flex-direction: column; align-items: center; }
            .recommendations-grid { grid-template-columns: 1fr; }
            .preference-options { grid-template-columns: repeat(2, 1fr); }
            .behavioral-trigger { bottom: 1rem; right: 1rem; left: 1rem; max-width: none; }
        }
    </style>
</head>
<body>
    <!-- Personalized Header -->
    <header class="personalized-header">
        <div class="welcome-message" id="welcome-message">Welcome back, Sarah! üëã</div>
        <p>Based on your travel history, we've found some perfect matches for you</p>
        <div class="user-stats">
            <div class="stat-item">
                <div class="stat-number">7</div>
                <div class="stat-label">Trips Booked</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">$2,400</div>
                <div class="stat-label">Total Saved</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">4.9‚òÖ</div>
                <div class="stat-label">Your Rating</div>
            </div>
        </div>
    </header>

    <!-- Personalized Recommendations -->
    <section class="recommendations-section">
        <h2 class="section-title">üéØ Recommended Just for You</h2>
        <div class="recommendations-grid">
            <div class="recommendation-card">
                <div class="recommendation-badge">95% Match</div>
                <div class="recommendation-image">üèØ</div>
                <div class="recommendation-content">
                    <h3 class="recommendation-title">Japan Cultural Experience</h3>
                    <p class="recommendation-reason">Based on your love for cultural destinations</p>
                    <div class="dynamic-pricing">
                        <div class="pricing-header">
                            <div class="pricing-title">Special Price for You</div>
                            <div class="pricing-timer">Expires in 4h 23m</div>
                        </div>
                        <div class="pricing-details">
                            <div>
                                <span class="original-price">$2,299</span>
                                <span class="discounted-price">$1,899</span>
                            </div>
                            <div class="savings-amount">Save $400</div>
                        </div>
                    </div>
                    <div class="recommendation-features">
                        <span class="feature-tag">Cultural Sites</span>
                        <span class="feature-tag">Food Tours</span>
                        <span class="feature-tag">7 Days</span>
                    </div>
                    <button class="trigger-cta" onclick="bookRecommendation('japan')">Book This Trip</button>
                </div>
            </div>

            <div class="recommendation-card">
                <div class="recommendation-badge">88% Match</div>
                <div class="recommendation-image">üèõÔ∏è</div>
                <div class="recommendation-content">
                    <h3 class="recommendation-title">European Art Cities</h3>
                    <p class="recommendation-reason">Perfect for your art museum interests</p>
                    <div class="recommendation-price">$1,699</div>
                    <div class="recommendation-features">
                        <span class="feature-tag">Museums</span>
                        <span class="feature-tag">Architecture</span>
                        <span class="feature-tag">10 Days</span>
                    </div>
                    <button class="trigger-cta" onclick="bookRecommendation('europe')">Explore Details</button>
                </div>
            </div>

            <div class="recommendation-card">
                <div class="recommendation-badge">82% Match</div>
                <div class="recommendation-image">üèñÔ∏è</div>
                <div class="recommendation-content">
                    <h3 class="recommendation-title">Bali Wellness Retreat</h3>
                    <p class="recommendation-reason">Time for relaxation after your busy year</p>
                    <div class="recommendation-price">$1,299</div>
                    <div class="recommendation-features">
                        <span class="feature-tag">Spa</span>
                        <span class="feature-tag">Yoga</span>
                        <span class="feature-tag">5 Days</span>
                    </div>
                    <button class="trigger-cta" onclick="bookRecommendation('bali')">Book Now</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Preference Learning -->
    <section class="recommendations-section">
        <div class="preference-learning">
            <h3 class="learning-title">üß† Help us learn your preferences better</h3>
            <p style="color: var(--primary-600); margin-bottom: 1.5rem;">
                Select what interests you most for even better recommendations
            </p>
            <div class="preference-options">
                <div class="preference-option" onclick="selectPreference(this, 'adventure')">
                    <div class="preference-icon">üèîÔ∏è</div>
                    <div class="preference-label">Adventure Sports</div>
                </div>
                <div class="preference-option" onclick="selectPreference(this, 'luxury')">
                    <div class="preference-icon">üíé</div>
                    <div class="preference-label">Luxury Experiences</div>
                </div>
                <div class="preference-option selected" onclick="selectPreference(this, 'culture')">
                    <div class="preference-icon">üé≠</div>
                    <div class="preference-label">Cultural Sites</div>
                </div>
                <div class="preference-option" onclick="selectPreference(this, 'food')">
                    <div class="preference-icon">üçΩÔ∏è</div>
                    <div class="preference-label">Food & Wine</div>
                </div>
                <div class="preference-option" onclick="selectPreference(this, 'nature')">
                    <div class="preference-icon">üåø</div>
                    <div class="preference-label">Nature & Wildlife</div>
                </div>
                <div class="preference-option" onclick="selectPreference(this, 'beach')">
                    <div class="preference-icon">üèñÔ∏è</div>
                    <div class="preference-label">Beach & Relaxation</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Behavioral Trigger -->
    <div class="behavioral-trigger" id="behavioral-trigger">
        <div class="trigger-title">üéØ Perfect Match Found!</div>
        <div class="trigger-message">
            Based on your browsing, we found a Japan trip that's 95% match for your preferences.
        </div>
        <button class="trigger-cta" onclick="viewMatch()">View This Match</button>
    </div>

    <script>
        // User Personalization Data
        const userProfile = {
            name: 'Sarah',
            preferences: ['culture', 'food', 'art'],
            budget: 2500,
            travelStyle: 'cultural',
            previousDestinations: ['Italy', 'France', 'Greece'],
            bookingHistory: 7,
            totalSaved: 2400
        };

        // Personalized Welcome Message
        function updateWelcomeMessage() {
            const messages = [
                `Welcome back, ${userProfile.name}! Ready for your next cultural adventure?`,
                `Hi ${userProfile.name}! We found some amazing cultural destinations for you`,
                `${userProfile.name}, your next perfect trip is waiting!`
            ];
            
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            document.getElementById('welcome-message').textContent = randomMessage;
        }

        // Preference Selection
        function selectPreference(element, preference) {
            element.classList.toggle('selected');
            
            // Update user preferences
            if (element.classList.contains('selected')) {
                if (!userProfile.preferences.includes(preference)) {
                    userProfile.preferences.push(preference);
                }
            } else {
                userProfile.preferences = userProfile.preferences.filter(p => p !== preference);
            }
            
            // Update recommendations based on new preferences
            updateRecommendations();
        }

        // Update Recommendations
        function updateRecommendations() {
            console.log('Updating recommendations based on preferences:', userProfile.preferences);
            // In a real app, this would trigger an API call to get new recommendations
        }

        // Behavioral Triggers
        let pageViewTime = 0;
        let scrollDepth = 0;

        // Track page engagement
        setInterval(() => {
            pageViewTime++;
            
            // Show behavioral trigger after 30 seconds of engagement
            if (pageViewTime === 30) {
                showBehavioralTrigger();
            }
        }, 1000);

        // Track scroll depth
        window.addEventListener('scroll', () => {
            const scrollPercent = (window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100;
            scrollDepth = Math.max(scrollDepth, scrollPercent);
            
            // Show trigger if user scrolled 70% and spent time
            if (scrollDepth > 70 && pageViewTime > 20) {
                showBehavioralTrigger();
            }
        });

        function showBehavioralTrigger() {
            const trigger = document.getElementById('behavioral-trigger');
            if (!trigger.classList.contains('show')) {
                trigger.classList.add('show');
                
                // Auto-hide after 10 seconds
                setTimeout(() => {
                    trigger.classList.remove('show');
                }, 10000);
            }
        }

        function viewMatch() {
            document.getElementById('behavioral-trigger').classList.remove('show');
            // Scroll to the recommended trip
            document.querySelector('.recommendation-card').scrollIntoView({ behavior: 'smooth' });
        }

        // Dynamic Pricing Updates
        function updateDynamicPricing() {
            const pricingElements = document.querySelectorAll('.pricing-timer');
            pricingElements.forEach(element => {
                const currentTime = element.textContent;
                const [hours, minutes] = currentTime.match(/\d+/g).map(Number);
                
                let totalMinutes = hours * 60 + minutes - 1;
                if (totalMinutes < 0) totalMinutes = 240; // Reset to 4 hours
                
                const newHours = Math.floor(totalMinutes / 60);
                const newMinutes = totalMinutes % 60;
                
                element.textContent = `Expires in ${newHours}h ${newMinutes}m`;
            });
        }

        // Update pricing timer every minute
        setInterval(updateDynamicPricing, 60000);

        // Booking Functions
        function bookRecommendation(destination) {
            // Track the booking attempt
            console.log(`Booking ${destination} for user ${userProfile.name}`);
            
            // In a real app, this would:
            // 1. Track the conversion
            // 2. Update user preferences
            // 3. Redirect to booking flow
            
            alert(`Great choice! Redirecting to book your ${destination} trip...`);
            location.href = 'booking.html';
        }

        // Initialize personalization
        updateWelcomeMessage();
        
        // Simulate real-time updates
        setInterval(updateWelcomeMessage, 30000); // Update welcome message every 30 seconds
    </script>
</body>
</html>